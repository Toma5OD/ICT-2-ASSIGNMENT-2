{"ast":null,"code":"var _jsxFileName = \"/Users/tomasodalaigh/Desktop/GitHub/ICT-2-ASSIGNMENT-2/src/pages/favouriteMoviesPage.js\",\n    _this = this;\n\nimport React, { useContext } from \"react\";\nimport PageTemplate from \"../components/templateMovieListPage\";\nimport { MoviesContext } from \"../contexts/moviesContext\";\nimport { useQueries } from \"react-query\";\nimport { getMovie } from \"../api/tmdb-api\";\nimport Spinner from \"../components/spinner\";\nimport RemoveFromFavourites from \"../components/cardIcons/removeFromFavourites\";\nimport WriteReview from \"../components/cardIcons/writeReview\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar FavouriteMoviesPage = function FavouriteMoviesPage() {\n  var _useContext = useContext(MoviesContext),\n      movieIds = _useContext.favourites; // Create an array of queries and run in parallel.\n\n\n  var favouriteMovieQueries = useQueries(movieIds.map(function (movieId) {\n    return {\n      queryKey: [\"movie\", {\n        id: movieId\n      }],\n      queryFn: getMovie\n    };\n  })); // Check if any of the parallel queries is still loading.\n\n  var isLoading = favouriteMovieQueries.find(function (m) {\n    return m.isLoading === true;\n  });\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 12\n    }, _this);\n  }\n\n  var movies = favouriteMovieQueries.map(function (q) {\n    q.data.genre_ids = q.data.genres.map(function (g) {\n      return g.id;\n    });\n    return q.data;\n  });\n  return /*#__PURE__*/_jsxDEV(PageTemplate, {\n    title: \"Favourite Movies\",\n    movies: movies,\n    action: function action(movie) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(RemoveFromFavourites, {\n          movie: movie\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(WriteReview, {\n          movie: movie\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, _this);\n};\n\nexport default FavouriteMoviesPage;","map":{"version":3,"names":["React","useContext","PageTemplate","MoviesContext","useQueries","getMovie","Spinner","RemoveFromFavourites","WriteReview","FavouriteMoviesPage","movieIds","favourites","favouriteMovieQueries","map","movieId","queryKey","id","queryFn","isLoading","find","m","movies","q","data","genre_ids","genres","g","movie"],"sources":["/Users/tomasodalaigh/Desktop/GitHub/ICT-2-ASSIGNMENT-2/src/pages/favouriteMoviesPage.js"],"sourcesContent":["import React, { useContext } from \"react\";\nimport PageTemplate from \"../components/templateMovieListPage\";\nimport { MoviesContext } from \"../contexts/moviesContext\";\nimport { useQueries } from \"react-query\";\nimport { getMovie } from \"../api/tmdb-api\";\nimport Spinner from \"../components/spinner\";\nimport RemoveFromFavourites from \"../components/cardIcons/removeFromFavourites\";\nimport WriteReview from \"../components/cardIcons/writeReview\"\n\nconst FavouriteMoviesPage = () => {\n  const { favourites: movieIds } = useContext(MoviesContext);\n\n  // Create an array of queries and run in parallel.\n  const favouriteMovieQueries = useQueries(\n    movieIds.map((movieId) => {\n      return {\n        queryKey: [\"movie\", { id: movieId }],\n        queryFn: getMovie,\n      };\n    })\n  );\n  // Check if any of the parallel queries is still loading.\n  const isLoading = favouriteMovieQueries.find((m) => m.isLoading === true);\n\n  if (isLoading) {\n    return <Spinner />;\n  }\n\n  const movies = favouriteMovieQueries.map((q) => {\n    q.data.genre_ids = q.data.genres.map((g) => g.id);\n    return q.data;\n  });\n\n  return (\n    <PageTemplate\n      title=\"Favourite Movies\"\n      movies={movies}\n      action={(movie) => {\n        return (\n          <>\n            <RemoveFromFavourites movie={movie} />\n            <WriteReview movie={movie} />\n          </>\n        );\n      }}\n    />\n  );\n};\n\nexport default FavouriteMoviesPage;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,YAAP,MAAyB,qCAAzB;AACA,SAASC,aAAT,QAA8B,2BAA9B;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,SAASC,QAAT,QAAyB,iBAAzB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,oBAAP,MAAiC,8CAAjC;AACA,OAAOC,WAAP,MAAwB,qCAAxB;;;;AAEA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;EAChC,kBAAiCR,UAAU,CAACE,aAAD,CAA3C;EAAA,IAAoBO,QAApB,eAAQC,UAAR,CADgC,CAGhC;;;EACA,IAAMC,qBAAqB,GAAGR,UAAU,CACtCM,QAAQ,CAACG,GAAT,CAAa,UAACC,OAAD,EAAa;IACxB,OAAO;MACLC,QAAQ,EAAE,CAAC,OAAD,EAAU;QAAEC,EAAE,EAAEF;MAAN,CAAV,CADL;MAELG,OAAO,EAAEZ;IAFJ,CAAP;EAID,CALD,CADsC,CAAxC,CAJgC,CAYhC;;EACA,IAAMa,SAAS,GAAGN,qBAAqB,CAACO,IAAtB,CAA2B,UAACC,CAAD;IAAA,OAAOA,CAAC,CAACF,SAAF,KAAgB,IAAvB;EAAA,CAA3B,CAAlB;;EAEA,IAAIA,SAAJ,EAAe;IACb,oBAAO,QAAC,OAAD;MAAA;MAAA;MAAA;IAAA,SAAP;EACD;;EAED,IAAMG,MAAM,GAAGT,qBAAqB,CAACC,GAAtB,CAA0B,UAACS,CAAD,EAAO;IAC9CA,CAAC,CAACC,IAAF,CAAOC,SAAP,GAAmBF,CAAC,CAACC,IAAF,CAAOE,MAAP,CAAcZ,GAAd,CAAkB,UAACa,CAAD;MAAA,OAAOA,CAAC,CAACV,EAAT;IAAA,CAAlB,CAAnB;IACA,OAAOM,CAAC,CAACC,IAAT;EACD,CAHc,CAAf;EAKA,oBACE,QAAC,YAAD;IACE,KAAK,EAAC,kBADR;IAEE,MAAM,EAAEF,MAFV;IAGE,MAAM,EAAE,gBAACM,KAAD,EAAW;MACjB,oBACE;QAAA,wBACE,QAAC,oBAAD;UAAsB,KAAK,EAAEA;QAA7B;UAAA;UAAA;UAAA;QAAA,SADF,eAEE,QAAC,WAAD;UAAa,KAAK,EAAEA;QAApB;UAAA;UAAA;UAAA;QAAA,SAFF;MAAA,gBADF;IAMD;EAVH;IAAA;IAAA;IAAA;EAAA,SADF;AAcD,CAtCD;;AAwCA,eAAelB,mBAAf"},"metadata":{},"sourceType":"module"}